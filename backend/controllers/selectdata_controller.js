

const flight_data = async (req, res) => {
    try {
        const flightsdata = [
            {
                "flight_number": "AF123",
                "dep_iata": "CDG",
                "arr_iata": "JFK",
                "dep_delayed": false,
                "airline_iata": "AF",
                "dep_terminal": "2E",
                "arr_icao": "KJFK",
                "lat": 40.6413,
                "lng": -73.7781,
                "track": 121,
                "speed": 280,
                "status": "on-time",
                "dep_gate": "A34",
                "arr_terminal": "4",
                "duration": "07:30",
                "dep_time": "2024-08-15T14:00:00Z",
                "arr_gate": "B22",
                "dep_estimated": "2024-08-15T14:00:00Z",
                "arr_baggage": "Carrousel 5",
                "dep_actual": "2024-08-15T14:00:00Z",
                "arr_time": "2024-08-15T21:30:00Z",
                "dep_estimated_utc": "2024-08-15T12:00:00Z",
                "arr_estimated": "2024-08-15T21:30:00Z",
                "dep_time_utc": "2024-08-15T12:00:00Z",
                "arr_actual": "2024-08-15T21:30:00Z",
                "arr_time_utc": "2024-08-15T19:30:00Z",
                "arr_estimated_utc": "2024-08-15T19:30:00Z",
                "arr_actual_utc": "2024-08-15T19:30:00Z",
                "arr_delayed": false
            },
            {
                "flight_number": "LH456",
                "dep_iata": "FRA",
                "arr_iata": "LHR",
                "dep_delayed": false,
                "airline_iata": "LH",
                "dep_terminal": "1",
                "arr_icao": "EGLL",
                "lat": 51.4706,
                "lng": -0.4619,
                "track": 14,
                "speed": 180,
                "status": "en-route",
                "dep_gate": "B12",
                "arr_terminal": "5",
                "duration": "01:45",
                "dep_time": "2024-08-15T09:00:00Z",
                "arr_gate": "C56",
                "dep_estimated": "2024-08-15T09:00:00Z",
                "arr_baggage": "Carrousel 3",
                "dep_actual": "2024-08-15T09:00:00Z",
                "arr_time": "2024-08-15T10:45:00Z",
                "dep_estimated_utc": "2024-08-15T07:00:00Z",
                "arr_estimated": "2024-08-15T10:45:00Z",
                "dep_time_utc": "2024-08-15T07:00:00Z",
                "arr_actual": "2024-08-15T10:45:00Z",
                "arr_time_utc": "2024-08-15T09:45:00Z",
                "arr_estimated_utc": "2024-08-15T09:45:00Z",
                "arr_actual_utc": "2024-08-15T09:45:00Z",
                "arr_delayed": false
            },
            {
                "flight_number": "BA789",
                "dep_iata": "LHR",
                "arr_iata": "DXB",
                "dep_delayed": false,
                "airline_iata": "BA",
                "dep_terminal": "5",
                "arr_icao": "OMDB",
                "lat": 25.2528,
                "lng": 55.3644,
                "track": 34,
                "speed": 0,
                "status": "landed",
                "dep_gate": "C56",
                "arr_terminal": "3",
                "duration": "07:15",
                "dep_time": "2024-08-15T12:00:00Z",
                "arr_gate": "A10",
                "dep_estimated": "2024-08-15T12:00:00Z",
                "arr_baggage": "Carrousel 7",
                "dep_actual": "2024-08-15T12:00:00Z",
                "arr_time": "2024-08-15T19:15:00Z",
                "dep_estimated_utc": "2024-08-15T10:00:00Z",
                "arr_estimated": "2024-08-15T19:15:00Z",
                "dep_time_utc": "2024-08-15T10:00:00Z",
                "arr_actual": "2024-08-15T19:15:00Z",
                "arr_time_utc": "2024-08-15T15:15:00Z",
                "arr_estimated_utc": "2024-08-15T15:15:00Z",
                "arr_actual_utc": "2024-08-15T15:15:00Z",
                "arr_delayed": false
            },
            {
                "flight_number": "EK202",
                "dep_iata": "JFK",
                "arr_iata": "DXB",
                "dep_delayed": false,
                "airline_iata": "EK",
                "dep_terminal": "4",
                "arr_icao": "OMDB",
                "lat": 40.6413,
                "lng": -73.7781,
                "track": 234,
                "speed": 0,
                "status": "scheduled",
                "dep_gate": "D45",
                "arr_terminal": "3",
                "duration": "13:45",
                "dep_time": "2024-08-16T10:00:00Z",
                "arr_gate": "B5",
                "dep_estimated": "2024-08-16T10:00:00Z",
                "arr_baggage": "Carrousel 2",
                "dep_actual": null,
                "arr_time": "2024-08-16T23:45:00Z",
                "dep_estimated_utc": "2024-08-16T08:00:00Z",
                "arr_estimated": "2024-08-16T23:45:00Z",
                "dep_time_utc": "2024-08-16T08:00:00Z",
                "arr_actual": null,
                "arr_time_utc": "2024-08-16T19:45:00Z",
                "arr_estimated_utc": "2024-08-16T19:45:00Z",
                "arr_actual_utc": null,
                "arr_delayed": false
            },
            {
                "flight_number": "DL404",
                "dep_iata": "ATL",
                "arr_iata": "LAX",
                "dep_delayed": true,
                "airline_iata": "DL",
                "dep_terminal": "S",
                "arr_icao": "KLAX",
                "lat": 33.9416,
                "lng": -118.4085,
                "track": 12,
                "speed": 0,
                "status": "delayed",
                "dep_gate": "T5",
                "arr_terminal": "2",
                "duration": "05:00",
                "dep_time": "2024-08-15T15:00:00Z",
                "arr_gate": "D12",
                "dep_estimated": "2024-08-15T15:30:00Z",
                "arr_baggage": "Carrousel 6",
                "dep_actual": null,
                "arr_time": "2024-08-15T20:00:00Z",
                "dep_estimated_utc": "2024-08-15T13:30:00Z",
                "arr_estimated": "2024-08-15T20:30:00Z",
                "dep_time_utc": "2024-08-15T13:00:00Z",
                "arr_actual": null,
                "arr_time_utc": "2024-08-15T16:00:00Z",
                "arr_estimated_utc": "2024-08-15T16:30:00Z",
                "arr_actual_utc": null,
                "arr_delayed": true
            },
            {
                "flight_number": "UA707",
                "dep_iata": "SFO",
                "arr_iata": "ORD",
                "dep_delayed": true,
                "airline_iata": "UA",
                "dep_terminal": "3",
                "arr_icao": "KORD",
                "lat": 37.6213,
                "lng": -122.3790,
                "track": 7,
                "speed": 0,
                "status": "canceled",
                "dep_gate": "G2",
                "arr_terminal": "1",
                "duration": "04:30",
                "dep_time": "2024-08-15T18:00:00Z",
                "arr_gate": "E5",
                "dep_estimated": "2024-08-15T18:00:00Z",
                "arr_baggage": "Carrousel 4",
                "dep_actual": null,
                "arr_time": "2024-08-15T22:30:00Z",
                "dep_estimated_utc": "2024-08-15T16:00:00Z",
                "arr_estimated": "2024-08-15T22:30:00Z",
                "dep_time_utc": "2024-08-15T16:00:00Z",
                "arr_actual": null,
                "arr_time_utc": "2024-08-15T20:30:00Z",
                "arr_estimated_utc": "2024-08-15T20:30:00Z",
                "arr_actual_utc": null,
                "arr_delayed": true
            }
        ];


        res.json(flightsdata);
    } catch (err) {
        res.status(500).json({ error: 'Erreur lors de la récupération des récepteur adsb.' });
    }

};


const flight_data_one = async (req, res) => {
    try {
        const { flight_number } = req.params;
        // console.log(flight_number);
        const flightsdata = [
            {
                "flight_number": "AF123",
                "dep_iata": "CDG",
                "arr_iata": "JFK",
                "dep_delayed": false,
                "airline_iata": "AF",
                "dep_terminal": "2E",
                "arr_icao": "KJFK",
                "lat": 40.6413,
                "lng": -73.7781,
                "track": 121,
                "speed": 280,
                "status": "on-time",
                "dep_gate": "A34",
                "arr_terminal": "4",
                "duration": "07:30",
                "dep_time": "2024-08-15T14:00:00Z",
                "arr_gate": "B22",
                "dep_estimated": "2024-08-15T14:00:00Z",
                "arr_baggage": "Carrousel 5",
                "dep_actual": "2024-08-15T14:00:00Z",
                "arr_time": "2024-08-15T21:30:00Z",
                "dep_estimated_utc": "2024-08-15T12:00:00Z",
                "arr_estimated": "2024-08-15T21:30:00Z",
                "dep_time_utc": "2024-08-15T12:00:00Z",
                "arr_actual": "2024-08-15T21:30:00Z",
                "arr_time_utc": "2024-08-15T19:30:00Z",
                "arr_estimated_utc": "2024-08-15T19:30:00Z",
                "arr_actual_utc": "2024-08-15T19:30:00Z",
                "arr_delayed": false
            },
            {
                "flight_number": "LH456",
                "dep_iata": "FRA",
                "arr_iata": "LHR",
                "dep_delayed": false,
                "airline_iata": "LH",
                "dep_terminal": "1",
                "arr_icao": "EGLL",
                "lat": 51.4706,
                "lng": -0.4619,
                "track": 14,
                "speed": 180,
                "status": "en-route",
                "dep_gate": "B12",
                "arr_terminal": "5",
                "duration": "01:45",
                "dep_time": "2024-08-15T09:00:00Z",
                "arr_gate": "C56",
                "dep_estimated": "2024-08-15T09:00:00Z",
                "arr_baggage": "Carrousel 3",
                "dep_actual": "2024-08-15T09:00:00Z",
                "arr_time": "2024-08-15T10:45:00Z",
                "dep_estimated_utc": "2024-08-15T07:00:00Z",
                "arr_estimated": "2024-08-15T10:45:00Z",
                "dep_time_utc": "2024-08-15T07:00:00Z",
                "arr_actual": "2024-08-15T10:45:00Z",
                "arr_time_utc": "2024-08-15T09:45:00Z",
                "arr_estimated_utc": "2024-08-15T09:45:00Z",
                "arr_actual_utc": "2024-08-15T09:45:00Z",
                "arr_delayed": false
            },
            {
                "flight_number": "BA789",
                "dep_iata": "LHR",
                "arr_iata": "DXB",
                "dep_delayed": false,
                "airline_iata": "BA",
                "dep_terminal": "5",
                "arr_icao": "OMDB",
                "lat": 25.2528,
                "lng": 55.3644,
                "track": 34,
                "speed": 0,
                "status": "landed",
                "dep_gate": "C56",
                "arr_terminal": "3",
                "duration": "07:15",
                "dep_time": "2024-08-15T12:00:00Z",
                "arr_gate": "A10",
                "dep_estimated": "2024-08-15T12:00:00Z",
                "arr_baggage": "Carrousel 7",
                "dep_actual": "2024-08-15T12:00:00Z",
                "arr_time": "2024-08-15T19:15:00Z",
                "dep_estimated_utc": "2024-08-15T10:00:00Z",
                "arr_estimated": "2024-08-15T19:15:00Z",
                "dep_time_utc": "2024-08-15T10:00:00Z",
                "arr_actual": "2024-08-15T19:15:00Z",
                "arr_time_utc": "2024-08-15T15:15:00Z",
                "arr_estimated_utc": "2024-08-15T15:15:00Z",
                "arr_actual_utc": "2024-08-15T15:15:00Z",
                "arr_delayed": false
            },
            {
                "flight_number": "EK202",
                "dep_iata": "JFK",
                "arr_iata": "DXB",
                "dep_delayed": false,
                "airline_iata": "EK",
                "dep_terminal": "4",
                "arr_icao": "OMDB",
                "lat": 40.6413,
                "lng": -73.7781,
                "track": 234,
                "speed": 0,
                "status": "scheduled",
                "dep_gate": "D45",
                "arr_terminal": "3",
                "duration": "13:45",
                "dep_time": "2024-08-16T10:00:00Z",
                "arr_gate": "B5",
                "dep_estimated": "2024-08-16T10:00:00Z",
                "arr_baggage": "Carrousel 2",
                "dep_actual": null,
                "arr_time": "2024-08-16T23:45:00Z",
                "dep_estimated_utc": "2024-08-16T08:00:00Z",
                "arr_estimated": "2024-08-16T23:45:00Z",
                "dep_time_utc": "2024-08-16T08:00:00Z",
                "arr_actual": null,
                "arr_time_utc": "2024-08-16T19:45:00Z",
                "arr_estimated_utc": "2024-08-16T19:45:00Z",
                "arr_actual_utc": null,
                "arr_delayed": false
            },
            {
                "flight_number": "DL404",
                "dep_iata": "ATL",
                "arr_iata": "LAX",
                "dep_delayed": true,
                "airline_iata": "DL",
                "dep_terminal": "S",
                "arr_icao": "KLAX",
                "lat": 33.9416,
                "lng": -118.4085,
                "track": 12,
                "speed": 0,
                "status": "delayed",
                "dep_gate": "T5",
                "arr_terminal": "2",
                "duration": "05:00",
                "dep_time": "2024-08-15T15:00:00Z",
                "arr_gate": "D12",
                "dep_estimated": "2024-08-15T15:30:00Z",
                "arr_baggage": "Carrousel 6",
                "dep_actual": null,
                "arr_time": "2024-08-15T20:00:00Z",
                "dep_estimated_utc": "2024-08-15T13:30:00Z",
                "arr_estimated": "2024-08-15T20:30:00Z",
                "dep_time_utc": "2024-08-15T13:00:00Z",
                "arr_actual": null,
                "arr_time_utc": "2024-08-15T16:00:00Z",
                "arr_estimated_utc": "2024-08-15T16:30:00Z",
                "arr_actual_utc": null,
                "arr_delayed": true
            },
            {
                "flight_number": "UA707",
                "dep_iata": "SFO",
                "arr_iata": "ORD",
                "dep_delayed": true,
                "airline_iata": "UA",
                "dep_terminal": "3",
                "arr_icao": "KORD",
                "lat": 37.6213,
                "lng": -122.3790,
                "track": 7,
                "speed": 0,
                "status": "canceled",
                "dep_gate": "G2",
                "arr_terminal": "1",
                "duration": "04:30",
                "dep_time": "2024-08-15T18:00:00Z",
                "arr_gate": "E5",
                "dep_estimated": "2024-08-15T18:00:00Z",
                "arr_baggage": "Carrousel 4",
                "dep_actual": null,
                "arr_time": "2024-08-15T22:30:00Z",
                "dep_estimated_utc": "2024-08-15T16:00:00Z",
                "arr_estimated": "2024-08-15T22:30:00Z",
                "dep_time_utc": "2024-08-15T16:00:00Z",
                "arr_actual": null,
                "arr_time_utc": "2024-08-15T20:30:00Z",
                "arr_estimated_utc": "2024-08-15T20:30:00Z",
                "arr_actual_utc": null,
                "arr_delayed": true
            }
        ];

        // Filtrer le vol spécifique
        const flight = flightsdata.find(f => f.flight_number === flight_number);

        if (flight) {
            res.json(flight);
        } else {
            res.status(404).json({ error: 'Vol non trouvé' });
        }

    } catch (err) {
        res.status(500).json({ error: 'Erreur lors de la récupération du vol.' });
    }
};

module.exports = { flight_data, flight_data_one };
